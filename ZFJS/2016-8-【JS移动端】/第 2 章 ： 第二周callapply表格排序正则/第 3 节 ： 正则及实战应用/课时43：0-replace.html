<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <title>课时43：replace</title>
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <!--css-->
  <style>
  *{margin:0; padding:0;}
  body{font-family: "Hiragino Sans GB","Microsoft Yahei",arial,\5b8b\4f53,"Helvetica Neue",Helvetica,STHeiTi,sans-serif;}
  
  </style>
 </head>
 <body>
  <!--js-->
  <script>
  // 课时43：replace

	// replace: 把原来有的字符替换成新的字符
		var str = "chengjin2016chengjin2017";
		//str = str.replace("chengjin", "shenzheng168").replace("chengjin", "shenzhengjs");
		//console.log(str); // shenzheng1682016shenzhengjs2017 -->没有实现需求

	// 用正则替换
		str = str.replace(/chengjin/g, "shenzheng2088");
		console.log(str); // shenzheng20882016shenzheng20882017
		/*
		 replace 第一项的值是一个正则它的现实原理
		 首先我们和exec捕获一样，把所有和我们正则匹配的都捕获到，然后把捕获的内容替换成我们需要替换的新内容
		 /chengjin/g 按照这个正则把str中所有可以匹配的都捕获到，然后统一都替换成我们的 "shenzheng2088";
		*/
		var str = "chengjin2016chengjin2017";

		// exec
		var reg = /chengjin/g;
		console.log(reg.exec(str)); // ["chengjin", index: 0, input: "chengjin2016chengjin2017"]

		console.log(reg.exec(str)); // ["chengjin", index: 12, input: "chengjin2016chengjin2017"]

		str = str.replace(/chengjin/g, function(){
			console.log(arguments); //第一次执行匿名函数的结果--> ["chengjin", 0, "chengjin2016chengjin2017"]
									//第二次执行匿名函数的结果--> ["chengjin", 12, "chengjin2016chengjin2017"]
			
			console.log("ok");
			return "shenzheng2088";		
		});
		// 第二个参数换成一个函数
		// 1). 匿名函数执行多少次，取决于正则能在字符串中捕获多少次--->就是说正则捕获两次，所以我闪的匿名函数也执行两次
		// 2). 每一次执行匿名函数，里面传递的参数值arguments和我们自己通过exec捕获到的结果是非常的类似的(即使正则有分组，我们同样可以通过arguments获取到分组捕获的内容)
		// 3). return 你返回结果是啥，就相当于、把当前这一次大正则捕获的内容替换成你返回的内容
				var str = "chengjin2016chengjin2017";
				reg.exec(str); //
				str = str.replace(/\d+/g, function(){
					console.log(arguments[0]); // 每一次执行匿名函数把我们大正则捕获的内容获取到
					return 1; // 我返回的1把每一次大正则匹配捕获的内容都替换了
				});
				console.log(str); // chengjin1chengjin1


				var str = "chengjin2016chengjin2017";
				
				str = str.replace(/(\d+)/g, function(){
					console.log(arguments[1]); // 获取每一次执行匿名函数我们的正则捕获到的第一个分组中的内容
					
					
				});
				// RegExp.$1 // 获取第一个分组捕获的内容

  </script>
 </body>
</html>
